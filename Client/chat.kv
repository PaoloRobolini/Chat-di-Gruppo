<LoginScreen>:
    BoxLayout:
        orientation: 'vertical'
        padding: 40
        spacing: 20

        Label:
            text: "Benvenuto in Biscord!"
            font_size: 32
            size_hint_y: None
            height: 50

        TextInput:
            id: mail
            hint_text: "Inserisci il tuo indirizzo mail"
            font_size: 20

        TextInput:
            id: password
            hint_text: "Inserisci la password"
            font_size: 20

        Label:
            id: login_data_error
            text: ""
            font_size: 20

        Button:
            text: "Accedi"
            font_size: 20
            size_hint_y: None
            height: 50
            on_release: root.login()

        Button:
            text: "Non hai un account, registrati!"
            font_size: 20
            on_release: app.root.current = "signin"

<SigninScreen>:
    BoxLayout:
        orientation: 'vertical'
        padding: 40
        spacing: 20

        Label:
            text: "Benvenuto in Biscord!"
            font_size: 32
            size_hint_y: None
            height: 50

        TextInput:
            id: username
            hint_text: "Inserisci il tuo username"
            font_size: 20

        TextInput:
            id: mail
            hint_text: "Inserisci il tuo indirizzo mail"
            font_size: 20

        TextInput:
            id: password
            hint_text: "Inserisci la password"
            font_size: 20

        Label:
            id: signin_data_error
            text: ""
            font_size: 20

        Button:
            text: "Crea account"
            font_size: 20
            size_hint_y: None
            height: 50
            on_release: root.signin()

<ChatScreen>:
    BoxLayout:
        orientation: 'horizontal'  # Cambiato per ospitare menu laterale

        # MENU LATERALE A SINISTRA
        BoxLayout:
            orientation: 'vertical'
            size_hint_x: None
            width: 60
            spacing: 10
            padding: 5

            Button:
                size_hint: None, None
                size: 50, 50
                text: "+"
                on_release: root.aggiungicontatto()

            ScrollView:
                BoxLayout:
                    id: contact_list_sidebar
                    orientation: 'vertical'
                    spacing: 5
                    padding: 5
                    size_hint_y: None
                    height: self.minimum_height



        # CONTENUTO PRINCIPALE DELLA CHAT
        BoxLayout:
            orientation: 'vertical'
            padding: 10
            spacing: 10

            Label:
                text: "Chat - Utente: " + root.username
                font_size: 24
                size_hint_y: None
                height: 40

            ScrollView:
                size_hint_y: 0.8
                do_scroll_x: False
                do_scroll_y: True

                Label:
                    id: chat_label
                    text: root.chat_history
                    text_size: self.width, None
                    size_hint_y: None
                    height: self.texture_size[1]
                    halign: 'left'
                    valign: 'top'
                    padding: 10, 10

            BoxLayout:
                size_hint_y: None
                height: 50
                spacing: 10

                TextInput:
                    id: message_input
                    hint_text: "Scrivi un messaggio..."
                    multiline: False

                Button:
                    text: "Invia"
                    on_release: root.send_message()

<AggiungiContatto>:
    BoxLayout:
        orientation: 'vertical'
        padding: 40
        spacing: 20

        Label:
            text: "Aggiungi un contatto o unisciti a un gruppo"
            font_size: 32
            size_hint_y: None
            height: 50

        TextInput:
            id: contatto
            hint_text: "Inserisci il contatto da aggiungere"
            font_size: 20

        Label:
            id: login_data_error
            text: ""
            font_size: 20

        Button:
            text: "aggiungi"
            font_size: 20
            size_hint_y: None
            height: 50
            on_release: root.aggiungicontatto()